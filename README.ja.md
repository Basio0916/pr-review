[English](README.md) | [日本語](README.ja.md)

# pr-review

AI エージェントを使って GitHub のプルリクエストをレビューするツールです。AI エージェントに `/review` コマンドを追加し、プルリクエストの詳細なレビューを自動化します。

現在は **GitHub Copilot** および **Cursor** に対応しています。コマンドラインオプションで、どの AI エージェント用のプロンプトをインストールするかを指定できます。

## 特徴

- プルリクエストの diff を自動取得してレビュー
- コードの品質、バグ、セキュリティ、パフォーマンスなど多角的に分析
- 日本語・英語のレビュー出力に対応
- カスタムレビューガイドラインの設定が可能

## インストール

リポジトリのルートディレクトリで以下のコマンドを実行してください:

```bash
# GitHub Copilot 用にインストール(デフォルト)
npx pr-review

# Cursor 用にインストール
npx pr-review --cursor

# 言語を指定
npx pr-review --copilot --lang ja
```

このコマンドにより、`.review` ディレクトリとプロンプトテンプレートがプロジェクトに追加されます。

## GitHub Copilot での使い方

### 前提条件

- GitHub CLI (`gh`) がインストールされ、認証済みであること
- VS Code に GitHub Copilot がインストールされていること
- プロジェクトが GitHub リポジトリであること

### 使用方法

1. **インストール後**、VS Code で GitHub Copilot ChatをAgentモードで開く

2. **`/review` コマンドを実行**:

   ```
   /review
   ```

   現在のブランチに関連するプルリクエストを自動的に検出してレビューします。

3. **特定の PR をレビュー**:

   ```
   /review 123
   ```

   PR 番号を指定してレビューすることもできます。

### レビュー内容

`/review` コマンドは以下の観点でプルリクエストを分析します:

- 機能と仕様の正確性
- バグや回帰のリスク
- エッジケースとエラーハンドリング
- セキュリティ上の問題
- パフォーマンスとスケーラビリティ
- 可読性と保守性
- テストと検証
- ドキュメントの整合性
- 依存関係や設定の変更

### カスタマイズ

`.review/GUIDELINES.md` ファイルを作成することで、プロジェクト固有のレビューガイドラインを追加できます。

## CLI オプション

- `--copilot` - GitHub Copilot 用のプロンプトをインストール(デフォルト)
- `--cursor` - Cursor 用のプロンプトをインストール
- `--lang <locale>` - レビュー言語を設定 (例: `ja`, `en`)
- `-h`, `--help` - ヘルプを表示

## インストーラーの動作

`npx pr-review` を実行すると:

1. 設定用の `.review` ディレクトリを作成
2. 指定されたオプションに基づいて、エージェント固有のディレクトリにプロンプトテンプレートをコピー(デフォルトは GitHub Copilot):
   - `--copilot` またはデフォルト: `.github/prompts`
   - `--cursor`: `.cursor/commands`
3. 設定ファイル `.review/config.yml` を生成・更新
4. 言語設定などの構成を保存

## ライセンス

このプロジェクトは Apache License 2.0 の下で提供されます。詳細は `LICENSE` を参照してください。
